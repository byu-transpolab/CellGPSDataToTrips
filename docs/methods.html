<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 2 Methods | My Maps</title>
  <meta name="description" content="A short description" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content=" 2 Methods | My Maps" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A short description" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 2 Methods | My Maps" />
  
  <meta name="twitter:description" content="A short description" />
  



<meta name="date" content="2021-11-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="question.html"/>
<link rel="next" href="findings.html"/>
<style type="text/css">
p.abstract{
  text-align: center;
  font-weight: bold;
}
div.abstract{
  margin: auto;
  width: 90%;
}
</style>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CellGPSDataToTrips</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="question.html"><a href="question.html"><i class="fa fa-check"></i><b>1</b> Question</a></li>
<li class="chapter" data-level="2" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>2</b> Methods</a>
<ul>
<li class="chapter" data-level="2.1" data-path="methods.html"><a href="methods.html#data"><i class="fa fa-check"></i><b>2.1</b> Data</a></li>
<li class="chapter" data-level="2.2" data-path="methods.html"><a href="methods.html#models"><i class="fa fa-check"></i><b>2.2</b> Models</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="findings.html"><a href="findings.html"><i class="fa fa-check"></i><b>3</b> Findings</a>
<ul>
<li class="chapter" data-level="3.1" data-path="findings.html"><a href="findings.html#additional-analysis"><i class="fa fa-check"></i><b>3.1</b> Additional Analysis</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">My Maps</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="methods" class="section level1" number="2">
<h1><span class="header-section-number"> 2</span> Methods</h1>
<div id="data" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Data</h2>
<p>The GPS data used to determine the minPts and eps parameters come from 60 volunteers in
the Utah County area and were taken over a period of six or more months depending on the person. An example of what the raw GPS data looked like is shown in Figure 2.1.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:Figure1">Table 2.1: </span>Raw GPS Data
</caption>
<thead>
<tr>
<th style="text-align:right;">
accuracy
</th>
<th style="text-align:left;">
timestamp
</th>
<th style="text-align:right;">
speed
</th>
<th style="text-align:right;">
lat
</th>
<th style="text-align:right;">
lon
</th>
<th style="text-align:right;">
time
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:36
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:37
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:38
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:39
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:40
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:41
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
</tbody>
</table>
<p>Before the GPS data can be processed, it had to be cleaned and reformatted. Since a DBSCAN algorithm is being used, the speed variable was removed completely. From there, the dates and times had to be reformatted using functions from the <strong>lubridate</strong> package in R and by writing a “Yesterday” function that defines days as being from 3 AM to 3 AM instead of 12 AM to 12 AM. This was done because large amount of the demographic is college students, and they are likely to make trips after midnight. Table 2.2 shows what the cleaned data looked like.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:Figure2">Table 2.2: </span>Cleaned GPS Data
</caption>
<thead>
<tr>
<th style="text-align:left;">
id
</th>
<th style="text-align:right;">
lat
</th>
<th style="text-align:right;">
lon
</th>
<th style="text-align:left;">
timestamp
</th>
<th style="text-align:left;">
date
</th>
<th style="text-align:left;">
time
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
5f5184e73e2fd848eac22aec
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:36
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:36
</td>
</tr>
<tr>
<td style="text-align:left;">
5f5184e73e2fd848eac22aec
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:37
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:37
</td>
</tr>
<tr>
<td style="text-align:left;">
5f5184e73e2fd848eac22aec
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:38
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:38
</td>
</tr>
<tr>
<td style="text-align:left;">
5f5184e73e2fd848eac22aec
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:39
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:39
</td>
</tr>
<tr>
<td style="text-align:left;">
5f5184e73e2fd848eac22aec
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:40
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:40
</td>
</tr>
<tr>
<td style="text-align:left;">
5f5184e73e2fd848eac22aec
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:41
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:41
</td>
</tr>
</tbody>
</table>
</div>
<div id="models" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Models</h2>
<p>Once the data is cleaned and properly formatted, it is run through a DBSCAN algorithm largely based on the method done by Gong et al. in 2018 <span class="citation">(<a href="#ref-GongInspiration" role="doc-biblioref">Gong L. 2018</a>)</span>. This is where the eps and MinPts parameters will be chosen. After the DBSCAN algorithm determines how many clusters there are, they get split based on the time between consecutive points. This is to remove any error that comes from when a person makes two trips to the same place in one day (Ex. Home). Now, that cluster counts as two separate clusters if the time difference between the clusters is large enough.</p>
<p>Finally, there is an entropy calculation step where entropy is determined by the change in departure angle between consecutive points. The equation for this entropy is shown in the equation below <span class="citation">(<a href="#ref-GongInspiration" role="doc-biblioref">Gong L. 2018</a>)</span>. If the points are in a line, the person is likely at a stoplight and the entropy is very low. Implementing this entropy equation also removes the need for any subjective time or speed rules. For the purposes of this question, the entropy constraint will always be set to 0.5. The only changing parameters will be MinPts and eps.</p>
<p><span class="math display">\[\begin{equation}
  EI_q = -\sum_{d=1}^D ((\frac{n_d}{N})ln(\frac{n_d}{N}))
\end{equation}\]</span></p>
<p>The resulting clusters from this DBSCAN and entropy hybrid model are displayed in maps using R. For this experiment, I will look at a map of the cleaned data and determine how many clusters it looks like there is. Then, the data goes through the model and the calculated number of clusters is compared to how many I saw originally. I repeated this 5 times over 10 days in order to determine which eps and MinPts have the lowest error.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-GongInspiration" class="csl-entry">
Gong L., Morikawa T, Yamamoto T. 2018. <span>“Identification of Activity Stop Locations in GPS Trajectories by DBSCAN-TE Method Combined with Support Vector Machines.”</span> <em>Transportation Research Procedia</em>. <a href="https://doi.org/10.1016/J.TRPRO.2018.10.028">https://doi.org/10.1016/J.TRPRO.2018.10.028</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="question.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="findings.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["CellGPSDataToTrips.pdf", "CellGPSDataToTrips.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
