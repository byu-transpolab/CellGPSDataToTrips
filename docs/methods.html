<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 2 Methods | Determining DBSCAN-Entrpopy Hybrid Algorithm Parameters for Converting GPS Points to Activities</title>
  <meta name="description" content="A short description" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content=" 2 Methods | Determining DBSCAN-Entrpopy Hybrid Algorithm Parameters for Converting GPS Points to Activities" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A short description" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 2 Methods | Determining DBSCAN-Entrpopy Hybrid Algorithm Parameters for Converting GPS Points to Activities" />
  
  <meta name="twitter:description" content="A short description" />
  



<meta name="date" content="2021-11-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="question.html"/>
<link rel="next" href="findings.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />



<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CellGPSDataToTrips</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="question.html"><a href="question.html"><i class="fa fa-check"></i><b>1</b> Question</a></li>
<li class="chapter" data-level="2" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>2</b> Methods</a>
<ul>
<li class="chapter" data-level="2.1" data-path="methods.html"><a href="methods.html#data"><i class="fa fa-check"></i><b>2.1</b> Data</a></li>
<li class="chapter" data-level="2.2" data-path="methods.html"><a href="methods.html#models"><i class="fa fa-check"></i><b>2.2</b> Models</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="findings.html"><a href="findings.html"><i class="fa fa-check"></i><b>3</b> Findings</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Determining DBSCAN-Entrpopy Hybrid Algorithm Parameters for Converting GPS Points to Activities</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="methods" class="section level1" number="2">
<h1><span class="header-section-number"> 2</span> Methods</h1>
<div id="data" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Data</h2>
<p>The GPS data used to determine the four most accurate parameters come from 60 volunteers in
the Utah County area and were taken over a period of six or more months depending on the person. An example of what the raw GPS data looked like is shown in Figure 2.1.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:Figure1">Table 2.1: </span>Raw GPS Data
</caption>
<thead>
<tr>
<th style="text-align:right;">
accuracy
</th>
<th style="text-align:left;">
timestamp
</th>
<th style="text-align:right;">
speed
</th>
<th style="text-align:right;">
lat
</th>
<th style="text-align:right;">
lon
</th>
<th style="text-align:right;">
time
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:36
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:37
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:38
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:39
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:40
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2021-03-17 22:59:41
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:right;">
1.616044e+12
</td>
</tr>
</tbody>
</table>
<p>Before the GPS data can be processed, it had to be cleaned and reformatted. Since a DBSCAN algorithm is being used, the speed variable was removed completely. From there, the dates and times had to be reformatted using functions from the <strong>lubridate</strong> package in R and by writing a “Yesterday” function with output “ActivityDay” that defines activity days as being from 3 AM to 3 AM instead of 12 AM to 12 AM. This was done because many respondents are college students, so they are likely to make trips after midnight. Table 2.2 shows what the cleaned data looked like.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:Figure2">Table 2.2: </span>Cleaned GPS Data
</caption>
<thead>
<tr>
<th style="text-align:right;">
lat
</th>
<th style="text-align:right;">
lon
</th>
<th style="text-align:left;">
timestamp
</th>
<th style="text-align:left;">
date
</th>
<th style="text-align:left;">
time
</th>
<th style="text-align:left;">
activityDay
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:36
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:36
</td>
<td style="text-align:left;">
17-3
</td>
</tr>
<tr>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:37
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:37
</td>
<td style="text-align:left;">
17-3
</td>
</tr>
<tr>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:38
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:38
</td>
<td style="text-align:left;">
17-3
</td>
</tr>
<tr>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:39
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:39
</td>
<td style="text-align:left;">
17-3
</td>
</tr>
<tr>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:40
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:40
</td>
<td style="text-align:left;">
17-3
</td>
</tr>
<tr>
<td style="text-align:right;">
40.25293
</td>
<td style="text-align:right;">
-111.6602
</td>
<td style="text-align:left;">
2021-03-17 22:59:41
</td>
<td style="text-align:left;">
2021-03-17
</td>
<td style="text-align:left;">
22:59:41
</td>
<td style="text-align:left;">
17-3
</td>
</tr>
</tbody>
</table>
</div>
<div id="models" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Models</h2>
<p>Once the data is cleaned and properly formatted, it is run through a DBSCAN-entropy hybrid algorithm largely based on the method created by Gong et al. in 2018 <span class="citation">(<a href="#ref-GongInspiration" role="doc-biblioref">Gong L. 2018</a>)</span>. After the DBSCAN algorithm determines how many total clusters there are based on the eps and minpts parameters, they get further split based on the delta_t parameter if necessary. If the time difference between points at the same place is greater than delta_t, then the points will be split into two separate clusters or activities.</p>
<p>Finally, there is an entropy calculation step where entropy is determined by the change in departure angle between consecutive points. The equation for this entropy is shown in the equation below <span class="citation">(<a href="#ref-GongInspiration" role="doc-biblioref">Gong L. 2018</a>)</span>. If the points are in a line, the entropy is very low. In this algorithm, the entr_t parameter determines at which entropy someone is actually likely to be moving and not just at a stoplight, etc.</p>
<p><span class="math display">\[\begin{equation}
  EI_q = -\sum_{d=1}^D ((\frac{n_d}{N})ln(\frac{n_d}{N}))
\end{equation}\]</span></p>
<p>For this experiment, I will look at a map of the unprocessed, cleaned data and determine with my eyes how many clusters there are. Then, the hybrid algorithm will calculate the number of clusters using randomized values for the four parameters. Based on all the previous research that has been discussed, the ranges for the possible parameters are as follows:</p>
<p>minpts: (3,10)
eps: (1,50)
delta_t: (300, 1500) seconds
entr_t: (0.5,3)</p>
<p>Then, I will compare the amount of clusters I saw to the number of clusters the hybrid algorithm calculated. This process was repeated 5 times over 10 different days in order to determine which parameters are the most accurate.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-GongInspiration" class="csl-entry">
Gong L., Morikawa T, Yamamoto T. 2018. <span>“Identification of Activity Stop Locations in GPS Trajectories by DBSCAN-TE Method Combined with Support Vector Machines.”</span> <em>Transportation Research Procedia</em>. <a href="https://doi.org/10.1016/J.TRPRO.2018.10.028">https://doi.org/10.1016/J.TRPRO.2018.10.028</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="question.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="findings.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["CellGPSDataToTrips.pdf", "CellGPSDataToTrips.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
