# Findings

The hybrid algorithm returned a tibble with the parameters randomly selected for each round. In this case, 5 rounds of parameters were performed for each date. The first 10 rows of the resulting tibble, called random_clusters when one runs "tar_make()", is shown below:

```{r random_clusters, echo=FALSE, message=FALSE, warning=FALSE}
source("R/gps2trips.R")
source("_targets.R")
library(kableExtra)
library(tidyverse)

tar_load(random_clusters)

random_clusters

```

As seen from the random_clusters object, the number of clusters and information about those clusters are stored as tibbles in the column "clusters". An example of the contents of one of those "clusters" tibbles is seen in Figure 1.

```{r clusterCell, echo=FALSE, message=FALSE, warning=FALSE}

random_clusters$clusters[1]
```

Figure 1 also shows the 10 dates that were analyzed for this report as well as the associated nested geometric GPS locations (data) and nested number of clusters (clusters). Further expanding the clusters column list in Figure 1 shows the number of clusters for that date using the parameters from the corresponding iteration. In other words, each date had its number of clusters calculated using 5 different sets of parameters. 

Finally, those number of clusters (activities) were all compared to the number of clusters seen by looking at a map of the raw GPS points created using the *leaflet* and *sf* packages in R (example shown in Figure 2). The error between the algorithm's calculated clusters for each set of parameters and the clusters seen from the maps was calculated. Whichever set of parameters consistently gave the lowest error for each date is decidedly the most accurate set of parameters to use for this DBSCAN entropy hybrid algorithm.

```{r exampleMap, echo=FALSE, message=FALSE, warning=FALSE}
tar_load(raw_data_maps)
exampleMap <- raw_data_maps$blankMap[1]
exampleMap

```


Based on the results shown in Table 2, the parameters eps = , minpts = , delta_t, and entr_t = consistently gave the smallest errors across all 10 days. Therefore, that set of four parameters together are the most accurate to use in this kind of DBSCAN Entropy hybrid method where all four are being used simultaneously, impacting each other, in order to convert cellular GPS data into activities. An important note is that this is based on only performing 5 random iterations of parameters samples. In theory, there are many more combinations of all four of these parameters within their given ranges, so more testing could provide even more accurate results. 

```{r exampleError, echo=FALSE, message=FALSE, warning=FALSE}
errorTable <- read.csv("ExampleClusterError.csv")
errorTableHead <- head(errorTable)
errorTableHead %>%
kbl(booktabs = T, caption = "Algorithm vs. Manual Error", longtable = T) %>%
  kable_styling(full_width = F)
```

